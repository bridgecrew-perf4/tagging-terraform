
trigger:
- main

pool:
  vmImage: ubuntu-latest

jobs:
- job: testing_tf
  displayName: "testingtf"
  steps:
  - task: ms-devlabs.custom-terraform-tasks.custom-terraform-installer-task.TerraformInstaller@0
    inputs:
      terraformVersion: 'latest'
      
  - task: TerraformCLI@0
    inputs:
      command: 'init'
      backendType: 'azurerm'
      backendServiceArm: 'spn-devops'
      ensureBackend: true
      backendAzureRmResourceGroupName: 'rg-tf-init'
      backendAzureRmResourceGroupLocation: 'uksouth'
      backendAzureRmStorageAccountName: 'rgtfinittest'
      backendAzureRmContainerName: 'terratest'
      backendAzureRmKey: 'test.tfstate'
      allowTelemetryCollection: true